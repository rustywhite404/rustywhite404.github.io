---
title: NullPointException을 예방하는 방법과 많이 하는 실수   
date: 2022-01-20 00:13:00
categories: JAVA 
tags:
- JAVA
---

## NullPointException이란?    
null 때문에 생기는 exception이다. 객체의 값이 null인 걸 모르는 상태로 이 객체를 다른 곳에 활용하거나 값을 비교하려고 할 때 흔히 볼 수 있다. 다른 예외들에 비해 비교적 덜 무서운(?) 예외지만 그만큼 더 빈번하게 만나게 된다. 
  
<br/>

## NullPointException을 방지하려면     


**1. NPE 방지용으로 가장 많이 사용하는 != null** 

```JAVA 
Person harang = new Person();
String myName = null;
harang.setName(myName); 

    if(harang.getName() != null){
        System.out.println("이름이 있습니다.");
    }

``` 
**+) 초보자들이 한 번씩 하는 실수** 
  
```JAVA 
if(harang!=null && harang.getName().equals("하랑")){
  System.out.println("하랑입니다.");
}else{
  System.out.println("하랑이 아닙니다.");
}  
``` 
이 코드를 실행하면 if문 안에서 NPE가 발생한다. !=null으로 방어 코드도 작성했는데 왜 안될까?  
harang은 이미 new Person()을 통해 하나의 객체가 생성되어 있기 때문이다. 
비어있는 harang 객체의 값을 조회해보면 null이 아니라 `Person{name='null', age=0, position='null'}`이 출력된다. 위 코드에서 null 비교를 하려면 `harang.getName() != null` 등으로 값을 꺼내서 비교해야 NPE가 발생하지 않는다.   

**2. 문자열 비교는 null이 아닌 객체(or 문자열)을 기준으로** 


```JAVA  
 if(harang!=null && (("harang2").equals(harang.getName()) )){
    System.out.println("하랑입니다.");
}else{
    System.out.println("하랑이 아닙니다.");
}
```
**3. 메서드 체이닝을 남발하지 말자** 


**4. 객체 초기화는 빈 값으로 하기**   
```JAVA  
String myName = null;  
String myName2 = "";
```  

위에서 myName을 null로 초기화 했었다. 
하지만 myName2처럼 공백으로 초기화를 하면 myName에 값이 들어가지 않은 상태로 호출되어도 NPE는 발생하지 않는다. 소형기기 대상의 프로젝트가 아니라면 이 정도로 메모리 걱정을 할 필요는 없으므로, 꼭 필요한 경우가 아니라면 객체 초기화는 빈 값으로 하면 좋다.  

<br/>

**5. 좀 더 강화된 NULL 체크**  

**6.스프링을 사용하고 있다면 @NotNull 애노테이션 사용하기**  

DTO에 `@NotNull` 애노테이션을 사용하면 


**n. Optional 사용하기(따로 더 공부할 예정) **  