---
title: Callback, Promise, async/await ì‰½ê²Œ ì´í•´í•˜ê¸°                
date: 2025-03-13 13:09:14
categories: NodeJS Javascript         
           
published: true 
tags:
- NodeJS                
- Javascript 
---  

ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” `ì‹±ê¸€ ìŠ¤ë ˆë“œ ì–¸ì–´`ë‹¤. ì¦‰, í•œ ë²ˆì— í•œ ê°€ì§€ ì‘ì—…ë§Œ í•  ìˆ˜ ìˆë‹¤ëŠ” ëœ»ì´ë‹¤.  
ì›¹ ì„œë¹„ìŠ¤ëŠ” ë‹¤ì–‘í•œ ë™ì‘ì´ í•„ìš”í•˜ë‹¤. `DB ì½ê¸°, íŒŒì¼ ì½ê¸°, API ìš”ì²­ ë³´ë‚´ê¸°, ì‚¬ìš©ì ì…ë ¥...` ì´ ì‘ì—… í•˜ë‚˜í•˜ë‚˜ê°€ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì•¼ í•œë‹¤ë©´ ì–´ë–¨ê¹Œ? íŒŒì¼ í•˜ë‚˜ê°€ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì•¼ ë‹¤ìŒ íŒŒì¼ì„ ë°›ì„ ìˆ˜ ìˆê³ , íŒŒì¼ë“¤ì´ ë‹¤ìš´ë¡œë“œ ë˜ëŠ” ë™ì•ˆì—ëŠ” ë‹¤ë¥¸ ë™ì‘ì„ ì•„ë¬´ê²ƒë„ í•  ìˆ˜ ì—†ì„ ê²ƒì´ë‹¤. ê·¸ë˜ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ë¹„ë™ê¸°asynchronousë¡œ ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤. ê·¸ë ‡êµ¬ë‚˜~ í•˜ê³  ë„˜ì–´ê°€ê¸°ì—ëŠ” ë˜ ì´ìƒí•œ ì ì´ ìˆë‹¤. **ë¹„ë™ê¸°ë¡œ ì‘ì—…ì„ í•˜ë ¤ë©´ ìŠ¤ë ˆë“œê°€ ë‘ ê°œ ì´ìƒ ìˆì–´ì•¼ í•˜ëŠ” ê±° ì•„ë‹Œê°€?** í•˜ëŠ” ì ì´ë‹¤.  
ì‰½ê²Œ ë§í•´ì„œ ì¹´í˜ì— ì§ì›ì´ ë‘ ëª…ì€ ìˆì–´ì•¼ í•œ ëª…ì´ ì£¼ë¬¸ ë°›ê³  í•œ ëª…ì€ ìŒë£Œ ì œì¡°ë¥¼ í•  í…ë°, **ì§ì›ì´ í•˜ë‚˜ ë¿ì´ë¼ë©´ ì–´ë–»ê²Œ ì‘ì—… ë¶„ë‹´ì´ ê°€ëŠ¥í•˜ëƒ**ëŠ” ê²ƒì´ë‹¤.  

### ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë¹„ë™ê¸° ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹  
ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•  ë•ŒëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ ì™¸ë¶€ì˜ `Web APIs(ë¸Œë¼ìš°ì €)`ë‚˜ `libuv(Node.js)`ê°€ ëŒ€ì‹  ë¹„ë™ê¸° ì‘ì—…ì„ ì²˜ë¦¬í•´ì¤€ë‹¤. ë©”ì¸ ìŠ¤ë ˆë“œëŠ” í•˜ë‚˜ì§€ë§Œ ì£¼ë³€ ì‹œìŠ¤í…œë“¤ì´ ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•´ì£¼ê³ , ì‘ì—…ì´ ëë‚˜ë©´ ë‹¤ì‹œ ë©”ì¸ ìŠ¤ë ˆë“œì—ê²Œ ì•Œë ¤ì£¼ëŠ” êµ¬ì¡°ë‹¤. ê·¸ë˜ì„œ ì‹±ê¸€ ìŠ¤ë ˆë“œì—ì„œë„ ë¹„ë™ê¸°ì™€ ë³‘ë ¬ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•´ì§„ë‹¤. ìœ„ì—ì„œ ë§í•œ ì¹´í˜ ë¹„ìœ ë¥¼ ë‹¤ì‹œ ì‚¬ìš©í•˜ìë©´, ì§ì›ì€ 1ëª…ì´ì§€ë§Œ ë¡œë´‡ ì»¤í”¼ë¨¸ì‹ ì´ë‚˜ ë²ˆí˜¸í‘œ ê¸°ê³„ ë“±ì´ ì²˜ë¦¬ë¥¼ ë„ì™€ì£¼ê³  ìˆëŠ” ê²ƒì´ë‹¤. 

ì–´ë–»ê²Œ ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë¹„ë™ê¸° ì‘ì—…ì´ ê°€ëŠ¥í•œì§€ëŠ” ì´í•´í–ˆìœ¼ë‹ˆ, ì´ì œ ë¹„ë™ê¸° ì‘ì—…ì„ ì–´ë–»ê²Œ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ”ì§€ ëª‡ ê°€ì§€ ë°©ë²•ë“¤ì„ ì•Œì•„ë³´ì. 

## 1ï¸âƒ£ Callback (ì½œë°±)  
**Callback**ì€ "ì‘ì—…ì´ ëë‚œ ë’¤ ì‹¤í–‰í•  í•¨ìˆ˜ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê²¨ì£¼ëŠ” ë°©ì‹"ì´ë‹¤. ì¦‰, **"ì´ ì‘ì—… ëë‚˜ë©´ ì´ í•¨ìˆ˜ ì‹¤í–‰í•´ì¤˜"** ë¼ê³  ì•Œë ¤ì£¼ëŠ” ê²ƒ.  

### âœ… ì¥ì 
- ê°„ë‹¨í•˜ê³  ë¹ ë¥´ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ
- ì˜¤ë˜ëœ í™˜ê²½ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥

### âŒ ë‹¨ì 
- **ì½œë°± ì§€ì˜¥** ê°€ëŠ¥ì„± (ì¤‘ì²© êµ¬ì¡° ì•ˆì˜ ì¤‘ì²©êµ¬ì¡° ì•ˆì˜ ì¤‘ì²©êµ¬ì¡°...)ì´ ìˆë‹¤ 
- ì—ëŸ¬ ì²˜ë¦¬ê°€ ë³µì¡í•¨ 
- ì½”ë“œ ê°€ë…ì„± ë–¨ì–´ì§

---

### âœ… ì˜ˆì œ ì½”ë“œ (ìƒì„¸í˜ì´ì§€ ë°ì´í„° ì¡°íšŒ)

```javascript
app.get('/detail/:id', function (req, res) {
    const postId = parseInt(req.params.id);

    db.collection('post').findOne({ _id: postId }, function (error, result) {
        if (error) {
            console.error('â—ï¸ ì—ëŸ¬ ë°œìƒ:', error);
            return res.status(500).send('ì„œë²„ ì—ëŸ¬!');
        }

        if (!result) {
            return res.status(404).send('ê²Œì‹œê¸€ ì—†ìŒ!');
        }

        res.render('detail.ejs', { data: result });
    });
});
```

---

## 2ï¸âƒ£ Promise (í”„ë¡œë¯¸ìŠ¤)
**Promise**ëŠ” `ë¯¸ë˜ì— ì‘ì—…ì´ ëë‚˜ë©´, ê²°ê³¼ë¥¼ ì£¼ê² ë‹¤ëŠ” ì•½ì†`ì´ë‹¤. ì¦‰, ì§€ê¸ˆì€ ê²°ê³¼ê°€ ì—†ì§€ë§Œ, **ì‘ì—…ì´ ëë‚˜ë©´ ì•Œë ¤ì£¼ê² ë‹¤ëŠ” ê°ì²´**ë¼ê³  í•  ìˆ˜ ìˆë‹¤.

### âœ… ì¥ì  
- ì½œë°± ì§€ì˜¥ì„ ì–´ëŠ ì •ë„ í•´ê²° ê°€ëŠ¥ 
- `.then()`, `.catch()` ìœ¼ë¡œ **ì„±ê³µ, ì‹¤íŒ¨ ì²˜ë¦¬ ê°€ëŠ¥**  
- ë¹„ë™ê¸° ì‘ì—…ì„ ì—°ê²°(chain) ê°€ëŠ¥  

### âŒ ë‹¨ì 
- `.then()`ì´ ë§ì•„ì§€ë©´ ì—¬ì „íˆ ë³µì¡í•´ì§ˆ ìˆ˜ ìˆìŒ
- try-catchë¡œ ì—ëŸ¬ ì²˜ë¦¬ ë¶ˆí¸  

---

### âœ… ì˜ˆì œ ì½”ë“œ

```javascript
app.get('/detail/:id', (req, res) => {
    const postId = parseInt(req.params.id);

    db.collection('post').findOne({ _id: postId })
        .then(result => {
            if (!result) {
                return res.status(404).send('ê²Œì‹œê¸€ ì—†ìŒ!');
            }
            res.render('detail.ejs', { data: result });
        })
        .catch(error => {
            console.error('â—ï¸ ì—ëŸ¬ ë°œìƒ:', error);
            res.status(500).send('ì„œë²„ ì—ëŸ¬!');
        });
});
```
> ğŸ“Œ **ì´ê²Œ Promise ë°©ì‹ì´ë¼ëŠ” ê±¸ ì–´ë–»ê²Œ ì•Œì•„ë³¼ ìˆ˜ ìˆì„ê¹Œ?**  
> Promise ê°ì²´ì—ì„œ ì„±ê³µ ì‹œ ì‹¤í–‰í•  í•¨ìˆ˜ëŠ” `.then()`, ì‹¤íŒ¨ ì‹œ ì‹¤í–‰í•  í•¨ìˆ˜ëŠ” `.catch()`ë¡œ ë“±ë¡í•œë‹¤. ì½œë°± ë°©ì‹ì—ëŠ” ì´ëŸ° ë©”ì„œë“œê°€ ì—†ê¸° ë•Œë¬¸ì— êµ¬ë¶„ì´ ê°€ëŠ¥í•˜ë‹¤. 


---

## 3ï¸âƒ£ async/await  
**async/await**ì€ Promiseë¥¼ ë” ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ì£¼ëŠ” ë¬¸ë²•ì´ë‹¤. 

### âœ… ì¥ì 
- ì½”ë“œê°€ **ìˆœì°¨ì ìœ¼ë¡œ ì½í˜€ì„œ ì§ê´€ì **
- ì—ëŸ¬ ì²˜ë¦¬ë„ **try-catchë¡œ ê¹”ë”**
- ìœ ì§€ë³´ìˆ˜, í˜‘ì—…ì— ìš©ì´ â†’ **ì‹¤ë¬´ì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©ëœë‹¤**

### âŒ ë‹¨ì 
- Promise ê¸°ë°˜ í•¨ìˆ˜ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥
- awaitë¥¼ ë¹ ëœ¨ë¦¬ë©´ Promise ê°ì²´ ê·¸ëŒ€ë¡œ ë°˜í™˜(ì´ˆë³´ì ë•Œ ì‹¤ìˆ˜ í•  ìˆ˜ ìˆìŒ)

---

### âœ… ì˜ˆì œ ì½”ë“œ 

```javascript
app.get('/detail/:id', async (req, res) => {
    try {
        const postId = parseInt(req.params.id);
        const result = await db.collection('post').findOne({ _id: postId });

        if (!result) {
            return res.status(404).send('ê²Œì‹œê¸€ ì—†ìŒ!');
        }

        res.render('detail.ejs', { data: result });
    } catch (error) {
        console.error('â—ï¸ ì—ëŸ¬ ë°œìƒ:', error);
        res.status(500).send('ì„œë²„ ì—ëŸ¬!');
    }
});
```
> ğŸ“Œ **asyncì˜ ì—­í• **  
> í•¨ìˆ˜ ì•ì— asyncë¥¼ ë¶™ì´ë©´ í•´ë‹¹ í•¨ìˆ˜ê°€ ë¬´ì¡°ê±´ Promiseë¥¼ ë°˜í™˜í•˜ê²Œ í•´ì¤€ë‹¤.  
> ì¦‰, "ì´ í•¨ìˆ˜ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ë‹¤" ë¼ê³  ì„ ì–¸í•˜ëŠ” ê²ƒ. **ë‚´ë¶€ì—ì„œ awaitë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë°˜ë“œì‹œ í•¨ìˆ˜ ì•ì— asyncê°€ ë¶™ì–´ìˆì–´ì•¼ í•œë‹¤.** 

> ğŸ“Œ **awaitì˜ ì—­í• **  
> Promise ê°ì²´ ì•ì— ë¶™ì¸ë‹¤. í•´ë‹¹ Promiseê°€ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê² ë‹¤ëŠ” ì˜ë¯¸. 
> ë°˜ë“œì‹œ async í•¨ìˆ˜ ì•ˆì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤. 
```javascript 
async function getData() {
    const result = await db.collection('post').findOne({ _id: 1 });
    console.log(result);
}
```  

### â—ï¸ ìì£¼ í•˜ëŠ” ì‹¤ìˆ˜ ###  
- âŒ async ì—†ì´ await ì‚¬ìš© 
```javascript 
const result = await db.collection('post').findOne({ _id: 1 }); // ì—ëŸ¬ ë°œìƒ 
``` 
- âŒ asyncë¥¼ ë¶™ì˜€ëŠ”ë° await ì•ˆ ì“´ ê²½ìš°(â†’ await ì•ˆ ì“°ë©´ Promise ê°ì²´ ìì²´ê°€ ì¶œë ¥ë¨)
```javascript 
async function getData() {
    const result = db.collection('post').findOne({ _id: 1 });
    console.log(result); // Promise { <pending> }
} 
```  
### âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ  

```javascript
app.get('/detail/:id', async (req, res) => {
    try {
        const result = await db.collection('post').findOne({ _id: 1 });
        res.send(result);
    } catch (error) {
        res.status(500).send('ì—ëŸ¬ ë°œìƒ!');
    }
});
``` 
---

## ğŸ¯ ìµœì¢… ìš”ì•½

| ë°©ì‹ | ì •ì˜ | ì¥ì  | ë‹¨ì  |
|:-:|:-|:-|:-|
| **Callback** | ì‘ì—… ëë‚œ ë’¤ ì‹¤í–‰í•  í•¨ìˆ˜ ì „ë‹¬ | ë¹ ë¥´ê³  ê°„ë‹¨ | ì½œë°± ì§€ì˜¥, ê°€ë…ì„± ë‚®ìŒ |
| **Promise** | ì‘ì—…ì´ ëë‚œ ë’¤ ê²°ê³¼ë¥¼ ì•½ì†í•˜ëŠ” ê°ì²´ | then/catchë¡œ ì—°ê²° ê°€ëŠ¥, ì—ëŸ¬ êµ¬ë¶„ | then ë§ì•„ì§€ë©´ ë³µì¡ |
| **async/await** | Promiseë¥¼ ì‰½ê²Œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ë¬¸ë²• | ì½”ë“œ íë¦„ ì§ê´€ì , ì—ëŸ¬ ì²˜ë¦¬ ì‰¬ì›€ | await ë¹ ëœ¨ë¦¬ë©´ ì˜¤ë¥˜ ê°€ëŠ¥ |

